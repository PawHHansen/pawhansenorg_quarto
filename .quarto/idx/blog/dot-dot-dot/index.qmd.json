{"title":"Dot-dot-dot: Three dotplots to stake your life on","markdown":{"yaml":{"title":"Dot-dot-dot: Three dotplots to stake your life on","description":"Celebrating the beauty of dots and points in plotting data.","author":"Paw Hansen","date":"2023-06-09","image":"featured.jpg","categories":["statistical analysis"],"editor_options":{"chunk_output_type":"console"}},"headingText":"Plot 1: The Cleveland dotplot","containsRefs":false,"markdown":"\n\nHere is a quick post on a few basic plots you can make with `geom_point`. The goal is simply to celebrate _the dot_ as a way of graphing data. Who knows? Maybe someday there will be a post on the line too! For all plots, we will be working with the `gapminder` data. \n\n```{r}\n#| message: false\n#| warning: false\n#| code-fold: true\n#| code-summary: \"Packages used in this post\"\n\nlibrary(tidyverse)\nlibrary(broom)\nlibrary(modelsummary)\nlibrary(ggsci)\nlibrary(gapminder)\n\ntheme_set(theme_minimal())\ndata(\"gapminder\")\n```\n\n\nTo get started, let's make a classic Cleveland dot plot. These are good for providing at quick glance of summary statistics, here the average life expectancy for each continent:  \n\n```{r}\n#| message: false\n#| warning: false\n#| label: fig-life-exp\n#| fig-cap: \"Mean life expectancy across continents\"\n\ngapminder %>%\n  group_by(continent) %>%\n  summarise(mean = mean(lifeExp, na.rm = T)) %>%\n  mutate(continent = fct_reorder(continent, mean)) %>%\n  ggplot(aes(mean, continent)) + \n  geom_point(size = 4) +\n  labs(x = \"Years\",\n       y = NULL,\n       caption = \"Source: gapminder\")\n\n```\n\nOne small tweak could be to highlight one of the continents. For instance, suppose your analysis was about explaining what's going on with one particular observation. In particular, when looking at the above plot, Africa, seems to be falling behind the other continents. An easy way to highlight that would be using color: \n\n```{r}\n#| message: false\n#| warning: false\n#| label:  fig-africa \n#| fig-cap: \"What's the matter with Africa? Mean life expectancy across continents\"\n\ngapminder %>%\n  group_by(continent) %>%\n  summarise(mean = mean(lifeExp, na.rm = T)) %>%\n  mutate(continent = fct_reorder(continent, mean)) %>%\n  ggplot(aes(mean, continent)) + \n  geom_point(aes(color = I(ifelse(continent == \"Africa\", \n                                  \"firebrick\", \n                                  \"black\"))), \n             size = 4) +\n  labs(x = \"Years\",\n       y = NULL, \n       caption = \"Source: gapminder\")\n\n```\n\nThis kind of graph is en easy but powerfull way to spark initial curiosity with readers, which is a key part of [storytelling with data](https://clauswilke.com/dataviz/telling-a-story.html)\n\n### Plot 2: The dot-and-whisker\nNext up, we have the dot-and-whisker plot. Often, researchers and data analyst will report model estimates using tables. Some scholars, teasingly, call these 'BUTONs': _Big Ugly Table of Numbers_. \n\nA simple way to improve presentation is to make a dot-and-whisker plot of the model estimates and corresponding uncertainties. Let's fit a model and make a plot:\n\n```{r}\n#| message: false\n#| warning: false\n#| label:  model\n#| code-fold: false\n\n# Rescale population and GDP per capita to more meaningfull scale. \ngapminder <- \n  gapminder %>% \n  mutate(population_scaled = pop/100000000,\n         gdpPercap_scaled = gdpPercap/10000)\n\n# The fit model\ngap_model <- \n  lm(lifeExp ~ continent + year +  population_scaled + gdpPercap_scaled, \n     data = gapminder)\n\n```\n\n```{r}\n#| message: false\n#| warning: false\n#| label: fig-life-exp-world\n#| fig-cap: \"Explaining life expectancy across the world\"\n\ngap_model %>%\n  tidy(conf.int = T) %>%\n  filter(term != \"(Intercept)\") %>%\n  mutate(term = str_replace_all(term, \n                                \"continent\", \n                                \"Continent: \"),\n         term = str_to_title(term),\n         term = fct_reorder(term, \n                            estimate)) %>%\n  ggplot(aes(estimate, \n             term, \n             xmin = conf.low, \n             xmax = conf.high)) + \n  geom_vline(xintercept = 0, \n             linetype = \"dashed\",\n             color = \"grey\") + \n  geom_pointrange() + \n  labs(y = NULL, \n       x = \"Difference in years\")\n\n```\n\nFor reference, this is what the same results would have looked like if we had used a standard regression table:\n\n```{r}\n#| label: tbl-modelsummary-lifeexp\n#| tbl-cap: \"Explaining life expectancy\"\n\nmodelsummary(models = list(\"Life expectancy\" = gap_model), \n             fmt = fmt_significant(2),\n             stars = T,\n             gof_map = c(\"nobs\", \"rmse\",\"r.squared\"))\n  \n\n```\n\nThe dot-and-whisker plot helps readers quickly compare the model estimates and their corresponding uncertainty. \n\n### Plot 3: The dumbell chart\n\nFinally, the _dumbell chart_ can be useful when the goal is to highlight differences, especially across groups. Let's make one to compare the change in mean life expectancy from the 1950s to the 2000s across all five continents:   \n\n```{r}\n#| message: false\n#| warning: false\n#| label: fig-dumbell\n#| fig-cap: \"Mean life expectancy in 1950s and 2000s\"\n\ngapminder |> \n  mutate(decade = factor(year %/% 10 * 10)) |> \n  filter(decade %in% c(1950, 2000)) |> \n  group_by(continent, decade) |> \n  summarize(lifeexp = mean(lifeExp, na.rm = T)) |> \n  mutate(continent = fct_reorder(continent, lifeexp)) |> \n  ggplot(aes(lifeexp, continent, \n             group = decade)) + \n  geom_line(aes(group = continent), \n            color = \"grey80\", \n            linewidth = 1) + \n  geom_point(aes(color = continent), \n             size = 5) + \n  scale_color_brewer(type = \"qual\", palette = \"Set1\") + \n  labs(x = \"Life expectancy (years)\",\n       y = NULL,\n       caption =\"Source: gapminder\") + \n  theme(legend.position = \"none\")\n\n```\n\nThe graph makes it easy to see that Oceania has the highest average but Asia has seen the highest growth. This might be a useful \"Figure 1\"; illustrating a puzzle which your paper then tries to explain.  \n\n### Final thoughts: Three dotplots to stake your life on\n\nPoints or dots can be a useful way of plotting data. In this post, I have shown you three different and quite versatile plots you can use in your next analysis. \n\n### Cool! Where can I learn more?\n\n* Healy, Kieran. _Data visualization: a practical introduction_. Princeton University Press, 2018.\n","srcMarkdownNoYaml":"\n\nHere is a quick post on a few basic plots you can make with `geom_point`. The goal is simply to celebrate _the dot_ as a way of graphing data. Who knows? Maybe someday there will be a post on the line too! For all plots, we will be working with the `gapminder` data. \n\n```{r}\n#| message: false\n#| warning: false\n#| code-fold: true\n#| code-summary: \"Packages used in this post\"\n\nlibrary(tidyverse)\nlibrary(broom)\nlibrary(modelsummary)\nlibrary(ggsci)\nlibrary(gapminder)\n\ntheme_set(theme_minimal())\ndata(\"gapminder\")\n```\n\n### Plot 1: The Cleveland dotplot \n\nTo get started, let's make a classic Cleveland dot plot. These are good for providing at quick glance of summary statistics, here the average life expectancy for each continent:  \n\n```{r}\n#| message: false\n#| warning: false\n#| label: fig-life-exp\n#| fig-cap: \"Mean life expectancy across continents\"\n\ngapminder %>%\n  group_by(continent) %>%\n  summarise(mean = mean(lifeExp, na.rm = T)) %>%\n  mutate(continent = fct_reorder(continent, mean)) %>%\n  ggplot(aes(mean, continent)) + \n  geom_point(size = 4) +\n  labs(x = \"Years\",\n       y = NULL,\n       caption = \"Source: gapminder\")\n\n```\n\nOne small tweak could be to highlight one of the continents. For instance, suppose your analysis was about explaining what's going on with one particular observation. In particular, when looking at the above plot, Africa, seems to be falling behind the other continents. An easy way to highlight that would be using color: \n\n```{r}\n#| message: false\n#| warning: false\n#| label:  fig-africa \n#| fig-cap: \"What's the matter with Africa? Mean life expectancy across continents\"\n\ngapminder %>%\n  group_by(continent) %>%\n  summarise(mean = mean(lifeExp, na.rm = T)) %>%\n  mutate(continent = fct_reorder(continent, mean)) %>%\n  ggplot(aes(mean, continent)) + \n  geom_point(aes(color = I(ifelse(continent == \"Africa\", \n                                  \"firebrick\", \n                                  \"black\"))), \n             size = 4) +\n  labs(x = \"Years\",\n       y = NULL, \n       caption = \"Source: gapminder\")\n\n```\n\nThis kind of graph is en easy but powerfull way to spark initial curiosity with readers, which is a key part of [storytelling with data](https://clauswilke.com/dataviz/telling-a-story.html)\n\n### Plot 2: The dot-and-whisker\nNext up, we have the dot-and-whisker plot. Often, researchers and data analyst will report model estimates using tables. Some scholars, teasingly, call these 'BUTONs': _Big Ugly Table of Numbers_. \n\nA simple way to improve presentation is to make a dot-and-whisker plot of the model estimates and corresponding uncertainties. Let's fit a model and make a plot:\n\n```{r}\n#| message: false\n#| warning: false\n#| label:  model\n#| code-fold: false\n\n# Rescale population and GDP per capita to more meaningfull scale. \ngapminder <- \n  gapminder %>% \n  mutate(population_scaled = pop/100000000,\n         gdpPercap_scaled = gdpPercap/10000)\n\n# The fit model\ngap_model <- \n  lm(lifeExp ~ continent + year +  population_scaled + gdpPercap_scaled, \n     data = gapminder)\n\n```\n\n```{r}\n#| message: false\n#| warning: false\n#| label: fig-life-exp-world\n#| fig-cap: \"Explaining life expectancy across the world\"\n\ngap_model %>%\n  tidy(conf.int = T) %>%\n  filter(term != \"(Intercept)\") %>%\n  mutate(term = str_replace_all(term, \n                                \"continent\", \n                                \"Continent: \"),\n         term = str_to_title(term),\n         term = fct_reorder(term, \n                            estimate)) %>%\n  ggplot(aes(estimate, \n             term, \n             xmin = conf.low, \n             xmax = conf.high)) + \n  geom_vline(xintercept = 0, \n             linetype = \"dashed\",\n             color = \"grey\") + \n  geom_pointrange() + \n  labs(y = NULL, \n       x = \"Difference in years\")\n\n```\n\nFor reference, this is what the same results would have looked like if we had used a standard regression table:\n\n```{r}\n#| label: tbl-modelsummary-lifeexp\n#| tbl-cap: \"Explaining life expectancy\"\n\nmodelsummary(models = list(\"Life expectancy\" = gap_model), \n             fmt = fmt_significant(2),\n             stars = T,\n             gof_map = c(\"nobs\", \"rmse\",\"r.squared\"))\n  \n\n```\n\nThe dot-and-whisker plot helps readers quickly compare the model estimates and their corresponding uncertainty. \n\n### Plot 3: The dumbell chart\n\nFinally, the _dumbell chart_ can be useful when the goal is to highlight differences, especially across groups. Let's make one to compare the change in mean life expectancy from the 1950s to the 2000s across all five continents:   \n\n```{r}\n#| message: false\n#| warning: false\n#| label: fig-dumbell\n#| fig-cap: \"Mean life expectancy in 1950s and 2000s\"\n\ngapminder |> \n  mutate(decade = factor(year %/% 10 * 10)) |> \n  filter(decade %in% c(1950, 2000)) |> \n  group_by(continent, decade) |> \n  summarize(lifeexp = mean(lifeExp, na.rm = T)) |> \n  mutate(continent = fct_reorder(continent, lifeexp)) |> \n  ggplot(aes(lifeexp, continent, \n             group = decade)) + \n  geom_line(aes(group = continent), \n            color = \"grey80\", \n            linewidth = 1) + \n  geom_point(aes(color = continent), \n             size = 5) + \n  scale_color_brewer(type = \"qual\", palette = \"Set1\") + \n  labs(x = \"Life expectancy (years)\",\n       y = NULL,\n       caption =\"Source: gapminder\") + \n  theme(legend.position = \"none\")\n\n```\n\nThe graph makes it easy to see that Oceania has the highest average but Asia has seen the highest growth. This might be a useful \"Figure 1\"; illustrating a puzzle which your paper then tries to explain.  \n\n### Final thoughts: Three dotplots to stake your life on\n\nPoints or dots can be a useful way of plotting data. In this post, I have shown you three different and quite versatile plots you can use in your next analysis. \n\n### Cool! Where can I learn more?\n\n* Healy, Kieran. _Data visualization: a practical introduction_. Princeton University Press, 2018.\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"index.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.353","theme":{"light":["litera","../../custom.css"],"dark":["slate","custom.scss"]},"smooth-scroll":true,"title-block-banner":true,"title":"Dot-dot-dot: Three dotplots to stake your life on","description":"Celebrating the beauty of dots and points in plotting data.","author":"Paw Hansen","date":"2023-06-09","image":"featured.jpg","categories":["statistical analysis"],"editor_options":{"chunk_output_type":"console"}},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}